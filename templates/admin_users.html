{% extends "base.html" %}

{% block content %}
	<h1>Manage Users</h1>

	{% with messages = get_flashed_messages() %}
		{% if messages %}
			{% for message in messages %}
				<div class="alert alert-info">{{ message }}</div>
			{% endfor %}
		{% endif %}
	{% endwith %}

	<h2>Add New User</h2>
	<form method="POST">
		<input type="hidden" name="action" value="add">
		<div class="form-group">
			<label for="name">Имя:</label>
			<input type="text" id="name" name="name" class="form-control" required>
		</div>
		<div class="form-group">
			<label for="email">Email:</label>
			<input type="email" id="email" name="email" class="form-control" required>
		</div>
		<div class="form-group">
			<label for="password">Пароль:</label>
			<input type="password" id="password" name="password" class="form-control" required>
		</div>
		<div class="form-group">
			<label for="role">Роль:</label>
			<select id="role" name="role" class="form-control" required>
				<option value="admin">Администратор</option>
				<option value="customer">Покупатель</option>
				<option value="seller">Продавец</option>
				<option value="courier">Курьер</option>
			</select>
		</div>
		<button type="submit" class="btn btn-primary">Добавить пользователя</button>
	</form>

	<h2>All Users</h2>
	<table class="table table-striped">
		<thead>
			<tr>
				<th>ID</th>
				<th>Имя</th>
				<th>Email</th>
				<th>Роль</th>
				<th>Действие</th>
			</tr>
		</thead>
		<tbody>
			{% for user in users %}
				<tr>
					<td>{{ user[0] }}</td>
					<td>{{ user[1] }}</td>
					<td>{{ user[2] }}</td>
					<td>{{ user[3] }}</td>
					<td>
						<form method="POST" style="display:inline;">
							<input type="hidden" name="action" value="delete">
							<input type="hidden" name="user_id" value="{{ user[0] }}">
							<button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure?')">Удалить</button>
						</form>
					</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>

	<a href="{{ url_for('admin_panel') }}" class="btn btn-secondary">Вернуться в панель администратора</a>
{% endblock %}
