{% extends "base.html" %}
{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/products.css') }}">
{% endblock %}
{% block content %}
    <h1>Seller Profile</h1>
    <h2>Add New Product</h2>
    <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="action" value="add">
        <input type="text" name="name" placeholder="Name" required>
        <textarea name="description" placeholder="Description"></textarea>
        <input type="number" name="price" step="0.01" placeholder="Price" required>
        <input type="number" name="quantity" placeholder="Quantity" required>
        <input type="file" name="images" multiple accept="image/*">
        <input type="submit" value="Add Product">
    </form>
    <h2>Your Products</h2>
    <div class="products-grid">
        {% for product in products %}
        <div class="product-card">
            <h3>{{ product[1] }}</h3>
            <p>{{ product[2] }}</p>
            <p><strong>Price:</strong> ${{ product[3] }}</p>
            <p><strong>Quantity:</strong> {{ product[4] }}</p>
            <div class="images">
                {% for url in product[5] %}
                    <img src="{{ url }}" alt="Product image" width="100">
                {% endfor %}
            </div>
            <form method="POST" enctype="multipart/form-data" class="edit-form">
                <input type="hidden" name="action" value="edit">
                <input type="hidden" name="product_id" value="{{ product[0] }}">
                <input type="text" name="name" value="{{ product[1] }}" required>
                <textarea name="description">{{ product[2] }}</textarea>
                <input type="number" name="price" step="0.01" value="{{ product[3] }}" required>
                <input type="number" name="quantity" value="{{ product[4] }}" required>
                {% for url in product[5] %}
                    <input type="hidden" name="existing_images" value="{{ url }}">
                {% endfor %}
                <input type="file" name="images" multiple accept="image/*">
                <input type="submit" value="Update">
            </form>
            <form method="POST" onsubmit="return confirm('Are you sure you want to delete this product?');">
                <input type="hidden" name="action" value="delete">
                <input type="hidden" name="product_id" value="{{ product[0] }}">
                <button type="submit" style="background-color: #f44336;">Delete</button>
            </form>
        </div>
        {% endfor %}
    </div>
    <a href="{{ url_for('index') }}" class="button">Back</a>
{% endblock %}
